# 智能垃圾管理平台软件需求说明书

## 阶段信息

**文档版本**: 1.0
**日期**: 2025年5月6日
**项目阶段**: 初始阶段

---

## 目录

1. [项目概述](#1-项目概述)
2. [需求细化和拆分](#2-需求细化和拆分)
3. [数据库设计](#3-数据库设计)
4. [项目结构搭建](#4-项目结构搭建)
5. [API接口文档](#5-api接口文档)

---

## 1. 项目概述

### 1.1 项目描述

智能垃圾管理平台是一个面向小区、公园等局部区域的垃圾分类和管理系统，旨在提高垃圾分类效率，优化垃圾回收流程，实现智能化管理。

### 1.2 系统架构

系统采用分层架构，包括客户端层、API网关层、应用服务层、基础设施层和外部集成层。
```
+-------------------------------------------------------------+
|                        客户端层                              |
|  +-------------------+            +---------------------+   |
|  | 用户移动端         |            | 管理员Web端          |   |
|  | - APP/小程序/网页  |            | - 监控大屏           |   |
|  | - 垃圾识别界面     |            | - 数据分析界面       |   |
|  | - 分类查询页面     |            | - 设备管理界面       |   |
|  | - 地图导航界面     |            | - 用户管理界面       |   |
|  +--------+----------+            +-----------+---------+   |
+-----------|-----------------------------|------------------+
            |                             |
            | HTTP/WebSocket              | HTTP/WebSocket
            ▼                             ▼
+-------------------------------------------------------------+
|                        API网关层                             |
|  +---------------------------------------------------+      |
|  | - 请求路由转发          - 接口版本控制             |      |
|  | - 认证与鉴权            - 请求限流                 |      |
|  | - 日志记录              - 负载均衡                 |      |
|  +---------------------------------------------------+      |
+--------------------------|------------------------------+
                           | REST API
                           ▼
+-------------------------------------------------------------+
|                        应用服务层                            |
|  +----------------+    +----------------+    +------------+  |
|  | 用户服务        |    | 垃圾识别服务   |    | 设备管理服务 |  |
|  | - 用户注册/登录 |<-->| - 图像识别处理 |<-->| - 设备状态监控|  |
|  | - 个人信息管理  |    | - 分类规则匹配 |    | - 设备维护管理|  |
|  | - 权限控制      |    | - 识别历史记录 |    | - 告警处理    |  |
|  +-------+--------+    +-------+--------+    +------+-------+  |
|          ▲                     ▲                   ▲          |
|          |                     |                   |          |
|          ▼                     ▼                   ▼          |
|  +----------------+    +----------------+    +------------+  |
|  | 地图导航服务    |    | 数据分析服务   |    | 通知服务    |  |
|  | - 回收点管理    |<-->| - 数据统计     |<-->| - 消息推送  |  |
|  | - 路径规划      |    | - 报表生成     |    | - 提醒设置  |  |
|  | - 位置服务      |    | - 趋势分析     |    | - 事件通知  |  |
|  +----------------+    +----------------+    +------------+  |
+--------------------------|------------------------------+
                           | 数据访问
                           ▼
+-------------------------------------------------------------+
|                      基础设施层                              |
|  +----------------+    +----------------+    +------------+  |
|  | 数据存储        |    | 计算服务       |    | 中间件      |  |
|  | - MySQL(主数据) |<-->| - 图像识别算法 |<-->| - Redis缓存 |  |
|  | - MongoDB(日志) |    | - 数据挖掘模型 |    | - RabbitMQ  |  |
|  | - MinIO(对象库) |    | - 推荐算法     |    | - Elasticsearch|
|  +----------------+    +----------------+    +------------+  |
+-------------------------------------------------------------+
                           |
                           | 扩展集成
                           ▼
+-------------------------------------------------------------+
|                      外部集成层                              |
|  +----------------+    +----------------+    +------------+  |
|  | 第三方地图服务  |    | 支付接口       |    | 物联网设备  |  |
|  | (高德/百度地图) |    | (支付宝/微信)  |    | (智能垃圾箱)|  |
|  +----------------+    +----------------+    +------------+  |
+-------------------------------------------------------------+
```


### 1.3 开发技术栈

- 后端：Spring Boot + Maven
- 数据库：MySQL
- 缓存：Redis
- 消息队列：RabbitMQ（可选）
- 前端：Vue3 + ElementUI
- 版本控制：Git

---

## 2. 需求细化和拆分

### 2.1 用户端功能

#### 2.1.1 用户账户管理（可实现）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| U-001 | 用户注册 | 用户通过手机号/邮箱注册账号 | 高 | 可实现 |
| U-002 | 用户登录 | 用户使用账号密码或验证码登录 | 高 | 可实现 |
| U-003 | 个人信息管理 | 用户查看和修改个人资料 | 中 | 可实现 |
| U-004 | 密码重置 | 用户通过手机号/邮箱重置密码 | 中 | 可实现 |

#### 2.1.2 垃圾分类查询（可实现）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| Q-001 | 关键词搜索 | 用户输入垃圾名称，获取分类信息 | 高 | 可实现 |
| Q-002 | 分类指南 | 展示不同分类垃圾的处理方式 | 高 | 可实现 |
| Q-003 | 常见垃圾查询 | 提供常见垃圾的分类速查表 | 中 | 可实现 |

#### 2.1.3 垃圾识别功能（待开发）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| R-001 | 垃圾图片上传 | 用户上传垃圾图片 | 高 | 可实现 |
| R-002 | 图像识别分类 | 系统自动识别图片中的垃圾类型 | 高 | 待开发 |
| R-003 | 批量识别 | 一次性上传多张图片进行识别 | 低 | 待开发 |

> **开发方案**：R-002和R-003功能初期使用预设的识别结果，将固定几种垃圾类型的图片设置固定返回结果，形成产品演示效果。真实的图像识别算法将标记为TO-DO。

#### 2.1.4 回收点导航（待开发）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| N-001 | 回收点查询 | 展示附近的垃圾回收点信息 | 高 | 可实现 |
| N-002 | 地图展示 | 在地图上展示回收点位置 | 中 | 待开发 |
| N-003 | 路线导航 | 提供从当前位置到回收点的路线导航 | 低 | 待开发 |

> **开发方案**：N-002和N-003功能初期使用静态地图图片和预设路线数据，后续再接入第三方地图API。

#### 2.1.5 用户反馈（可实现）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| F-001 | 问题反馈 | 用户提交系统问题或建议 | 中 | 可实现 |
| F-002 | 分类纠错 | 用户纠正系统的分类错误 | 中 | 可实现 |
| F-003 | 反馈历史 | 用户查看历史反馈及处理结果 | 低 | 可实现 |

#### 2.1.6 通知与提醒（部分可实现）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| T-001 | 回收规则通知 | 推送当地垃圾回收规则和时间 | 中 | 可实现 |
| T-002 | 系统公告 | 推送系统更新和活动信息 | 中 | 可实现 |
| T-003 | 设备状态通知 | 推送垃圾箱满溢或故障信息 | 低 | 待开发 |

> **开发方案**：T-003功能初期使用模拟数据，定时发送模拟的设备状态通知。

### 2.2 管理端功能

#### 2.2.1 用户管理（可实现）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| M-001 | 用户列表 | 查看和搜索用户信息 | 高 | 可实现 |
| M-002 | 用户状态管理 | 启用/禁用用户账号 | 中 | 可实现 |
| M-003 | 用户反馈管理 | 查看和处理用户反馈 | 中 | 可实现 |

#### 2.2.2 设备监控与管理（待开发）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| D-001 | 设备信息管理 | 添加、修改、删除设备信息 | 高 | 可实现 |
| D-002 | 设备状态监控 | 实时监控垃圾箱状态 | 高 | 待开发 |
| D-003 | 设备维护记录 | 记录设备维护历史 | 中 | 可实现 |

> **开发方案**：D-002功能初期使用模拟数据，显示预设的设备状态信息和模拟的状态变化。

#### 2.2.3 数据统计与分析（部分可实现）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| S-001 | 基础数据统计 | 统计用户注册量、查询次数等数据 | 高 | 可实现 |
| S-002 | 分类数据统计 | 统计不同类型垃圾的查询/识别次数 | 中 | 可实现 |
| S-003 | 高级数据分析 | 分析用户行为和垃圾分布趋势 | 低 | 待开发 |

> **开发方案**：S-003功能初期使用静态图表和预设数据，展示模拟的分析结果。

#### 2.2.4 系统设置（可实现）

| 功能ID | 功能名称 | 功能描述 | 优先级 | 实现状态 |
|--------|----------|----------|--------|----------|
| C-001 | 回收点管理 | 添加、修改、删除回收点信息 | 高 | 可实现 |
| C-002 | 分类规则配置 | 配置和更新垃圾分类规则 | 高 | 可实现 |
| C-003 | 通知规则设置 | 配置系统通知和提醒规则 | 中 | 可实现 |

---

## 3. 数据库设计

### 3.1 实体关系图

```
+----------------+     +----------------+     +----------------+
|     User       |     |   WasteItem    |     |   DeviceInfo   |
+----------------+     +----------------+     +----------------+
| PK: id         |     | PK: id         |     | PK: id         |
| username       |     | name           |     | deviceCode     |
| password       |     | category       |     | location       |
| phone          |     | description    |     | status         |
| email          |     | disposal_method|     | lastMaintenance|
| role           |     | image_url      |     | capacity       |
| createTime     |     | createTime     |     | createTime     |
+-------+--------+     +--------+-------+     +-------+--------+
        |                       |                     |
        |                       |                     |
        v                       v                     v
+----------------+     +----------------+     +----------------+
| UserFeedback   |     | RecognizeRecord|     | MaintenanceLog |
+----------------+     +----------------+     +----------------+
| PK: id         |     | PK: id         |     | PK: id         |
| FK: userId     |     | FK: userId     |     | FK: deviceId   |
| type           |     | FK: wasteItemId|     | maintainer     |
| content        |     | imageUrl       |     | description    |
| status         |     | result         |     | maintenanceTime|
| replyContent   |     | accuracy       |     | status         |
| createTime     |     | createTime     |     | createTime     |
+----------------+     +----------------+     +----------------+
        |                                             |
        |                                             |
        v                                             v
+----------------+                          +----------------+
| Notification   |                          | RecyclePoint   |
+----------------+                          +----------------+
| PK: id         |                          | PK: id         |
| FK: userId     |                          | name           |
| title          |                          | address        |
| content        |                          | longitude      |
| type           |                          | latitude       |
| isRead         |                          | openingHours   |
| createTime     |                          | wasteTypes     |
+----------------+                          | createTime     |
                                           +----------------+
```

### 3.2 数据表设计

#### 3.2.1 用户表（User）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 用户ID，自增 |
| username | VARCHAR | 50 | 否 | 否 | 用户名 |
| password | VARCHAR | 100 | 否 | 否 | 加密后的密码 |
| phone | VARCHAR | 20 | 是 | 否 | 手机号 |
| email | VARCHAR | 100 | 是 | 否 | 邮箱 |
| avatar | VARCHAR | 255 | 是 | 否 | 头像URL |
| role | VARCHAR | 20 | 否 | 否 | 角色(USER/ADMIN) |
| status | TINYINT | - | 否 | 否 | 状态(0:禁用,1:启用) |
| last_login_time | DATETIME | - | 是 | 否 | 最后登录时间 |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |
| update_time | DATETIME | - | 否 | 否 | 更新时间 |

#### 3.2.2 垃圾项目表（WasteItem）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 垃圾项目ID，自增 |
| name | VARCHAR | 100 | 否 | 否 | 垃圾名称 |
| category | VARCHAR | 20 | 否 | 否 | 分类(可回收/厨余/有害/其他) |
| description | TEXT | - | 是 | 否 | 描述 |
| disposal_method | TEXT | - | 是 | 否 | 处理方式 |
| image_url | VARCHAR | 255 | 是 | 否 | 图片URL |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |
| update_time | DATETIME | - | 否 | 否 | 更新时间 |

#### 3.2.3 设备信息表（DeviceInfo）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 设备ID，自增 |
| device_code | VARCHAR | 50 | 否 | 否 | 设备编码，唯一 |
| device_name | VARCHAR | 100 | 否 | 否 | 设备名称 |
| device_type | VARCHAR | 50 | 否 | 否 | 设备类型 |
| location | VARCHAR | 255 | 否 | 否 | 位置描述 |
| longitude | DECIMAL | (10,6) | 是 | 否 | 经度 |
| latitude | DECIMAL | (10,6) | 是 | 否 | 纬度 |
| status | TINYINT | - | 否 | 否 | 状态(0:离线,1:在线,2:故障) |
| capacity | INT | - | 是 | 否 | 容量百分比(0-100) |
| last_maintenance | DATETIME | - | 是 | 否 | 最后维护时间 |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |
| update_time | DATETIME | - | 否 | 否 | 更新时间 |

#### 3.2.4 用户反馈表（UserFeedback）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 反馈ID，自增 |
| user_id | BIGINT | - | 否 | 否 | 用户ID，外键 |
| type | VARCHAR | 20 | 否 | 否 | 反馈类型(问题/建议/纠错) |
| content | TEXT | - | 否 | 否 | 反馈内容 |
| status | TINYINT | - | 否 | 否 | 状态(0:未处理,1:处理中,2:已处理) |
| reply_content | TEXT | - | 是 | 否 | 回复内容 |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |
| update_time | DATETIME | - | 否 | 否 | 更新时间 |

#### 3.2.5 识别记录表（RecognizeRecord）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 记录ID，自增 |
| user_id | BIGINT | - | 否 | 否 | 用户ID，外键 |
| waste_item_id | BIGINT | - | 是 | 否 | 垃圾项目ID，外键 |
| image_url | VARCHAR | 255 | 否 | 否 | 上传图片URL |
| result | VARCHAR | 20 | 是 | 否 | 识别结果(分类) |
| accuracy | DECIMAL | (5,2) | 是 | 否 | 准确率 |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |

#### 3.2.6 回收点表（RecyclePoint）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 回收点ID，自增 |
| name | VARCHAR | 100 | 否 | 否 | 回收点名称 |
| address | VARCHAR | 255 | 否 | 否 | 详细地址 |
| longitude | DECIMAL | (10,6) | 否 | 否 | 经度 |
| latitude | DECIMAL | (10,6) | 否 | 否 | 纬度 |
| opening_hours | VARCHAR | 100 | 是 | 否 | 开放时间 |
| waste_types | VARCHAR | 255 | 否 | 否 | 接收的垃圾类型 |
| contact | VARCHAR | 50 | 是 | 否 | 联系方式 |
| image_url | VARCHAR | 255 | 是 | 否 | 图片URL |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |
| update_time | DATETIME | - | 否 | 否 | 更新时间 |

#### 3.2.7 通知表（Notification）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 通知ID，自增 |
| user_id | BIGINT | - | 是 | 否 | 用户ID，外键(NULL表示全局通知) |
| title | VARCHAR | 100 | 否 | 否 | 通知标题 |
| content | TEXT | - | 否 | 否 | 通知内容 |
| type | VARCHAR | 20 | 否 | 否 | 通知类型(系统/设备/活动) |
| is_read | TINYINT | - | 否 | 否 | 是否已读(0:未读,1:已读) |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |

#### 3.2.8 设备维护记录表（MaintenanceLog）

| 字段名 | 数据类型 | 长度 | 允许空 | 主键 | 说明 |
|--------|----------|------|--------|------|------|
| id | BIGINT | - | 否 | 是 | 维护记录ID，自增 |
| device_id | BIGINT | - | 否 | 否 | 设备ID，外键 |
| maintainer | VARCHAR | 50 | 否 | 否 | 维护人员 |
| description | TEXT | - | 否 | 否 | 维护描述 |
| maintenance_time | DATETIME | - | 否 | 否 | 维护时间 |
| status | TINYINT | - | 否 | 否 | 状态(0:未完成,1:已完成) |
| create_time | DATETIME | - | 否 | 否 | 创建时间 |

---

## 4. 项目结构搭建

### 4.1 整体项目结构

```
waste-management/
├── pom.xml                                 # Maven配置文件
├── README.md                               # 项目说明文档
├── src/
│   ├── main/
│   │   ├── java/com/waste/management/      # Java源代码
│   │   │   ├── WasteManagementApplication.java  # 应用程序入口
│   │   │   ├── config/                     # 配置类
│   │   │   │   ├── WebConfig.java          # Web配置
│   │   │   │   ├── SecurityConfig.java     # 安全配置
│   │   │   │   └── SwaggerConfig.java      # API文档配置
│   │   │   ├── controller/                 # 控制器层
│   │   │   │   ├── user/                   # 用户相关控制器
│   │   │   │   ├── waste/                  # 垃圾分类相关控制器
│   │   │   │   ├── device/                 # 设备相关控制器
│   │   │   │   ├── feedback/               # 反馈相关控制器
│   │   │   │   ├── notification/           # 通知相关控制器
│   │   │   │   ├── recyclepoint/           # 回收点相关控制器
│   │   │   │   └── statistics/             # 统计相关控制器
│   │   │   ├── service/                    # 服务层
│   │   │   │   ├── impl/                   # 服务实现类
│   │   │   │   └── interfaces/             # 服务接口
│   │   │   ├── repository/                 # 数据访问层
│   │   │   ├── model/                      # 实体类
│   │   │   │   ├── entity/                 # 数据库实体
│   │   │   │   ├── dto/                    # 数据传输对象
│   │   │   │   └── vo/                     # 视图对象
│   │   │   ├── exception/                  # 异常处理
│   │   │   │   ├── GlobalExceptionHandler.java
│   │   │   │   └── BusinessException.java
│   │   │   ├── util/                       # 工具类
│   │   │   │   ├── JwtUtil.java            # JWT工具
│   │   │   │   ├── RedisUtil.java          # Redis工具
│   │   │   │   └── FileUtil.java           # 文件处理工具
│   │   │   └── common/                     # 通用类
│   │   │       ├── constant/               # 常量定义
│   │   │       ├── enums/                  # 枚举类型
│   │   │       └── result/                 # 通用返回结果
│   │   └── resources/                      # 资源文件
│   │       ├── application.yml             # 主配置文件
│   │       ├── application-dev.yml         # 开发环境配置
│   │       ├── application-prod.yml        # 生产环境配置
│   │       ├── static/                     # 静态资源
│   │       └── templates/                  # 模板文件(如果需要)
│   └── test/                               # 测试代码
│       └── java/com/waste/management/
│           ├── controller/                 # 控制器测试
│           ├── service/                    # 服务测试
│           └── repository/                 # 数据访问层测试
└── docs/                                   # 项目文档
    ├── api/                                # API文档
    ├── db/                                 # 数据库文档
    └── design/                             # 设计文档
```

### 4.2 主要组件说明

#### 4.2.1 控制器层（Controller）

负责处理HTTP请求，调用服务层完成业务逻辑，返回处理结果。按功能模块划分不同的控制器类。

#### 4.2.2 服务层（Service）

负责具体业务逻辑的实现，每个服务都定义接口和实现类。服务层调用数据访问层完成数据操作。

#### 4.2.3 数据访问层（Repository）

负责与数据库交互，使用Spring Data JPA简化数据库操作。每个实体类对应一个Repository接口。

#### 4.2.4 实体层（Model）

- **entity**: 数据库映射实体
- **dto**: 数据传输对象，用于服务层之间的数据传输
- **vo**: 视图对象，用于控制器与前端的数据交互

#### 4.2.5 通用组件

- **exception**: 统一异常处理
- **util**: 常用工具类
- **common**: 通用常量、枚举和返回结果

---

## 5. API接口文档

### 5.1 API设计原则

- 采用RESTful API设计风格
- 使用HTTP状态码表示请求结果
- JSON格式数据交换
- 统一的接口返回格式
- 接口版本控制
- JWT令牌认证

### 5.2 通用返回格式

```json
{
    "code": 200,         // 状态码，200成功，其他为错误码
    "message": "success", // 响应消息
    "data": {            // 响应数据，可能是对象、数组或null
        // 具体数据
    },
    "timestamp": 1637817600000  // 时间戳
}
```

### 5.3 用户模块API

#### 5.3.1 用户注册

- **URL**: `/api/v1/user/register`
- **方法**: POST
- **描述**: 用户注册接口
- **请求参数**:

```json
{
    "username": "user123",
    "password": "password123",
    "phone": "13800138000",
    "email": "user@example.com"
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "注册成功",
    "data": {
        "userId": 1,
        "username": "user123"
    },
    "timestamp": 1637817600000
}
```

#### 5.3.2 用户登录

- **URL**: `/api/v1/user/login`
- **方法**: POST
- **描述**: 用户登录接口
- **请求参数**:

```json
{
    "username": "user123",
    "password": "password123"
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "登录成功",
    "data": {
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
        "userInfo": {
            "userId": 1,
            "username": "user123",
            "role": "USER"
        }
    },
    "timestamp": 1637817600000
}
```

### 5.4 垃圾分类查询API

#### 5.4.1 关键词搜索

- **URL**: `/api/v1/waste/search`
- **方法**: GET
- **描述**: 通过关键词搜索垃圾分类信息
- **请求参数**:
  - `keyword`: 搜索关键词 (必填)
- **响应参数**:

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "items": [
            {
                "id": 1,
                "name": "塑料瓶",
                "category": "可回收物",
                "description": "常见的饮料包装",
                "disposalMethod": "清空内容物，压扁后投入可回收物箱"
            },
            // 更多结果...
        ],
        "total": 10
    },
    "timestamp": 1637817600000
}
```

#### 5.4.2 垃圾识别（图片上传）

- **URL**: `/api/v1/waste/recognize`
- **方法**: POST
- **描述**: 上传垃圾图片进行识别
- **请求参数**: 
  - `file`: 图片文件 (multipart/form-data)
- **响应参数**:

```json
{
    "code": 200,
    "message": "识别成功",
    "data": {
        "recognizeId": 1,
        "imageUrl": "http://example.com/images/waste/123.jpg",
        "result": "可回收物",
        "accuracy": 0.95,
        "wasteItem": {
            "id": 1,
            "name": "塑料瓶",
            "category": "可回收物",
            "description": "常见的饮料包装",
            "disposalMethod": "清空内容物，压扁后投入可回收物箱"
        }
    },
    "timestamp": 1637817600000
}
```

> **注意**: 初期实现时，此接口将使用预设的识别结果，根据固定的几种垃圾图片返回对应的分类信息。

### 5.5 回收点API

#### 5.5.1 查询附近回收点

- **URL**: `/api/v1/recyclepoint/nearby`
- **方法**: GET
- **描述**: 查询用户附近的回收点
- **请求参数**:
  - `longitude`: 经度 (必填)
  - `latitude`: 纬度 (必填)
  - `radius`: 搜索半径，单位米，默认1000
- **响应参数**:

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "points": [
            {
                "id": 1,
                "name": "社区回收站",
                "address": "xx市xx区xx路100号",
                "longitude": 116.123456,
                "latitude": 39.123456,
                "openingHours": "8:00-18:00",
                "wasteTypes": "可回收物,有害垃圾",
                "distance": 500
            },
            // 更多回收点...
        ],
        "total": 5
    },
    "timestamp": 1637817600000
}
```

> **注意**: 初期实现时，此接口将使用预设的静态数据，不实现真实的地理位置计算。

### 5.6 用户反馈API

#### 5.6.1 提交反馈

- **URL**: `/api/v1/feedback/submit`
- **方法**: POST
- **描述**: 用户提交反馈
- **请求参数**:

```json
{
    "type": "PROBLEM",  // PROBLEM问题/SUGGESTION建议/CORRECTION纠错
    "content": "系统无法正常识别玻璃瓶"
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "反馈提交成功",
    "data": {
        "feedbackId": 1
    },
    "timestamp": 1637817600000
}
```

### 5.7 管理端API

#### 5.7.1 用户管理-查询用户列表

- **URL**: `/api/v1/admin/users`
- **方法**: GET
- **描述**: 管理员查询用户列表
- **请求参数**:
  - `page`: 页码，默认1
  - `size`: 每页条数，默认10
  - `username`: 用户名筛选（可选）
- **响应参数**:

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "users": [
            {
                "id": 1,
                "username": "user123",
                "phone": "138****8000",
                "email": "u***@example.com",
                "role": "USER",
                "status": 1,
                "createTime": "2023-11-20 10:00:00"
            },
            // 更多用户...
        ],
        "total": 100,
        "page": 1,
        "size": 10
    },
    "timestamp": 1637817600000
}
```

#### 5.7.2 设备管理-添加设备

- **URL**: `/api/v1/admin/device`
- **方法**: POST
- **描述**: 添加垃圾回收设备
- **请求参数**:

```json
{
    "deviceCode": "DEV20231120001",
    "deviceName": "智能回收箱A01",
    "deviceType": "RECYCLE_BIN",
    "location": "xx小区东门",
    "longitude": 116.123456,
    "latitude": 39.123456,
    "capacity": 100
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "设备添加成功",
    "data": {
        "deviceId": 1,
        "deviceCode": "DEV20231120001"
    },
    "timestamp": 1637817600000
}
```

#### 5.7.3 设备管理-设备状态监控

- **URL**: `/api/v1/admin/device/status`
- **方法**: GET
- **描述**: 查询设备状态数据
- **请求参数**:
  - `page`: 页码，默认1
  - `size`: 每页条数，默认10
  - `status`: 设备状态筛选（可选）
- **响应参数**:

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "devices": [
            {
                "id": 1,
                "deviceCode": "DEV20231120001",
                "deviceName": "智能回收箱A01",
                "location": "xx小区东门",
                "status": 1,  // 0:离线,1:在线,2:故障
                "capacity": 75,
                "lastMaintenanceTime": "2023-11-15 09:00:00"
            },
            // 更多设备...
        ],
        "total": 50,
        "page": 1,
        "size": 10
    },
    "timestamp": 1637817600000
}
```

> **注意**: 初期实现时，此接口将返回预设的静态数据，模拟设备状态信息。

#### 5.7.4 设备管理-添加维护记录

- **URL**: `/api/v1/admin/device/maintenance`
- **方法**: POST
- **描述**: 添加设备维护记录
- **请求参数**:

```json
{
    "deviceId": 1,
    "maintainer": "张工",
    "description": "清空垃圾箱并修复传感器",
    "maintenanceTime": "2023-11-20T10:00:00"
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "维护记录添加成功",
    "data": {
        "maintenanceId": 1
    },
    "timestamp": 1637817600000
}
```

#### 5.7.5 数据统计-基础数据统计

- **URL**: `/api/v1/admin/statistics/basic`
- **方法**: GET
- **描述**: 获取基础统计数据
- **请求参数**:
  - `startDate`: 开始日期(yyyy-MM-dd)
  - `endDate`: 结束日期(yyyy-MM-dd)
- **响应参数**:

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "userCount": 1280,
        "newUserCount": 125,
        "activeUserCount": 568,
        "recognizeCount": 3560,
        "feedbackCount": 89,
        "deviceCount": 50,
        "faultDeviceCount": 3
    },
    "timestamp": 1637817600000
}
```

#### 5.7.6 数据统计-分类数据统计

- **URL**: `/api/v1/admin/statistics/category`
- **方法**: GET
- **描述**: 获取垃圾分类统计数据
- **请求参数**:
  - `startDate`: 开始日期(yyyy-MM-dd)
  - `endDate`: 结束日期(yyyy-MM-dd)
- **响应参数**:

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "categories": [
            {
                "category": "可回收物",
                "count": 1256,
                "percentage": 45.3
            },
            {
                "category": "厨余垃圾",
                "count": 856,
                "percentage": 30.9
            },
            {
                "category": "有害垃圾",
                "count": 152,
                "percentage": 5.5
            },
            {
                "category": "其他垃圾",
                "count": 507,
                "percentage": 18.3
            }
        ],
        "total": 2771
    },
    "timestamp": 1637817600000
}
```

#### 5.7.7 回收点管理-添加回收点

- **URL**: `/api/v1/admin/recyclepoint`
- **方法**: POST
- **描述**: 添加垃圾回收点
- **请求参数**:

```json
{
    "name": "社区回收站",
    "address": "xx市xx区xx路100号",
    "longitude": 116.123456,
    "latitude": 39.123456,
    "openingHours": "8:00-18:00",
    "wasteTypes": ["可回收物", "有害垃圾"],
    "contact": "010-12345678"
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "回收点添加成功",
    "data": {
        "recyclePointId": 1
    },
    "timestamp": 1637817600000
}
```

#### 5.7.8 分类规则配置-添加垃圾项目

- **URL**: `/api/v1/admin/waste-item`
- **方法**: POST
- **描述**: 添加垃圾分类项目
- **请求参数**:

```json
{
    "name": "塑料瓶",
    "category": "可回收物",
    "description": "常见的饮料包装",
    "disposalMethod": "清空内容物，压扁后投入可回收物箱",
    "imageFile": [二进制文件]  // 可选
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "垃圾项目添加成功",
    "data": {
        "wasteItemId": 1
    },
    "timestamp": 1637817600000
}
```

### 5.8 通知模块API

#### 5.8.1 发送系统通知

- **URL**: `/api/v1/admin/notification`
- **方法**: POST
- **描述**: 管理员发送系统通知
- **请求参数**:

```json
{
    "title": "系统升级通知",
    "content": "系统将于2023年11月30日22:00-24:00进行升级维护",
    "type": "SYSTEM",  // SYSTEM系统/DEVICE设备/ACTIVITY活动
    "userIds": [1, 2, 3]  // 可选，不提供则发送给所有用户
}
```

- **响应参数**:

```json
{
    "code": 200,
    "message": "通知发送成功",
    "data": {
        "notificationId": 1,
        "targetUserCount": 3
    },
    "timestamp": 1637817600000
}
```

#### 5.8.2 获取用户通知列表

- **URL**: `/api/v1/notification/list`
- **方法**: GET
- **描述**: 获取当前用户的通知列表
- **请求参数**:
  - `page`: 页码，默认1
  - `size`: 每页条数，默认10
  - `isRead`: 是否已读(可选)
- **响应参数**:

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "notifications": [
            {
                "id": 1,
                "title": "系统升级通知",
                "content": "系统将于2023年11月30日22:00-24:00进行升级维护",
                "type": "SYSTEM",
                "isRead": 0,
                "createTime": "2023-11-20 10:00:00"
            },
            // 更多通知...
        ],
        "total": 25,
        "page": 1,
        "size": 10,
        "unreadCount": 8
    },
    "timestamp": 1637817600000
}
```

#### 5.8.3 标记通知为已读

- **URL**: `/api/v1/notification/read/{notificationId}`
- **方法**: PUT
- **描述**: 标记指定通知为已读
- **请求参数**:
  - `notificationId`: 通知ID (路径参数)
- **响应参数**:

```json
{
    "code": 200,
    "message": "已标记为已读",
    "data": null,
    "timestamp": 1637817600000
}
```

### 5.9 待开发功能的模拟API

#### 5.9.1 图像识别功能模拟

- **使用方式**: 在初期实现中，垃圾识别接口(`/api/v1/waste/recognize`)将通过预设规则返回结果：
  - 对于特定测试图片，返回固定分类结果
  - 可使用图片哈希值或文件名匹配预设数据
  - 模拟95%的识别准确率

#### 5.9.2 设备状态监控模拟

- **使用方式**: 在初期实现中，设备状态接口(`/api/v1/admin/device/status`)将：
  - 返回预设的设备列表及状态
  - 提供模拟的容量变化数据
  - 随机生成小比例的设备故障状态

#### 5.9.3 地图导航功能模拟

- **使用方式**: 在初期实现中，回收点导航接口(`/api/v1/recyclepoint/nearby`)将：
  - 返回预设的固定回收点数据
  - 提供静态的距离计算结果
  - 使用静态地图图片代替实时导航

### 5.10 API文档工具

项目将使用Swagger UI自动生成API文档，开发环境下访问路径：

- URL: `http://localhost:8080/swagger-ui.html`
- 包含所有API的详细说明、请求参数、响应示例
- 提供API测试功能
